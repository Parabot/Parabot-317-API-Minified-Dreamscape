language: java

dist: trusty

jdk:
  - openjdk7
  - oraclejdk8

before_install:
  - chmod +x ./.travis/maven-build.sh
  - chmod +x ./.travis/call-creation.sh
  - mvn clean

install:
  - sudo apt-get update && sudo apt-get --assume-yes install zip unzip

script: "./.travis/maven-build.sh"

after_deploy: "./.travis/call-creation.sh"

notifications:
  email: false
  slack:
    secure: RLntqWb6Ude1cBZx3YUajM2e8keWr26By7H+k+r3PkeyrLWwlAPDClGoc7Z6MViwY4AVACdNq/q4+D2tZ672L/gjb/DJBUiIOKp0onsD0s8icmmkWaNKjxidKtcQ1pKO1JpMMfgh53nkqkXOlWI0rHd7WK3n/UzIkl9qIS1vYXXW6VCG+3Mowkwkv04HEAitUY0fvxUrhmyJjYakn5obRCERBd1k2I4zBshc4YRnaTc/eTt1R54WErNXMqkZhlhATNTLEmct4v1JZFWDKXtMv9mtv9bKiTKtFemyS7nGkdZG9lk3mYHeNg7bcZsdNn7iMtUeKsEPjJCuHzl63TzN6lmhPUDHr9Rhak4svKkFnk4nyrRDqw7HnmnEDKt2w3u+hx84mueJoMVaI8IjMTqALGmqAXlm5/NsXlNL1PXtzFVs0UV24IOvTLavGYasYMxBbk3PDC/8FSzS++uhw4DUJK0mdGE3mwtJsQdo5QNRVQKY8g4EXNdzsN4s4DMjI4iO5Zp/XaWOpe6+bGf630McbPsOAX5c0ISZViO2FVkfFOLIWNsXQy+sIQms3XgmQlRXljEpyHVsE13rhqdKNXaFbwXWYUX1+64Sg42ZmgbNBgKwX1p+hpe+u/asPhIGP3guFaLNCH2tlwb8ZxTzZXWnToZi6AUC0kYvVInH/9TEXMI=
  webhooks:
    on_success: always
    on_failure: always
    on_start: never

env:
  global:
    - PROVIDER_VERSION=0.1

cache:
  directories:
    - ".autoconf"
    - "$HOME/.m2"

deploy:
  - provider: s3
    access_key_id: AKIAIXJLGEGYOUYYAZKQ
    secret_access_key:
      secure: SvLbqNqQNXNI1YUn867myIcEQZkj7aWlmRIsYQcYiFlEdtID0QjHrXzV8A1qw6FcpqMJeYidNom2xhMIvmc4y4GWMIDiRksGyA9JZ+b+RPtibzgBKL2APjM9CwipnNolDe7ne/oNnjtmXDBWgqYmpVnAFPE+GihjGMH5BuTgDdViCf/lqMeYkU/jspyzp76aj9gGky0A8kjakLBrIupCz9Qx8bmxpw/Psfn1jxyXiPF0yX/livBmQY3xaBL6BiOjpvVHjj5vvduw1yV+FN6bIZWCv7js9vfzxc5roO0uLQmEcYvdbl3axrwauDnvt8/5Uy9+s17mY9wIh+hn2Cj7BNfbxTRtq8p+UWTREWtBQK+ahj/EVCqpfDKEn3BlMo0KbEmLEDV+A3E33elR5TOnn7a8MvkBQkH89dX36FVvefzNnqL68YvWoJbAH2fW6JQkF6VjBOaydG+AUEWwxx7qFw5sd3Znc+3EQLV2ZeYPD+2OR0i1kcLDPJLhAMylUuyF0d6zSPAT/mZJLEhx7a6GsESuYIHqZqrZwqnp7RP+2ts1/bHI4tMFbEL1kRxG+yt3d9/dlwFiH95ybkxCYHxIPKh3y0jyoG+FFHsCrZqP3VtAPV1U1TDb3yT+NXkiJUEN63gUtzsxvP5a0kB+i1Y5yo99qYINaRmvvqJdIZp9wLA=
    bucket: parabot
    skip_cleanup: true
    local-dir: "./target/final/"
    upload-dir: "artifacts/dreamscape-provider"
    region: us-west-1
    detect_encoding: true
    acl: public_read
    on:
      repo: Parabot/Parabot-317-API-Minified-Dreamscape
      branch:
        - master
        - development
      jdk: 'oraclejdk7'